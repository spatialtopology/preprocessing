# MRIQC at JHPCE

The JHPCE uses Sun Grid Engine (SGE), implementing node-sharing with memory as a consumable
resource. This means that jobs must specify both the number of cores that they will use and the
maximum RAM.

Given that there are so many (large) files, it was impractical to store the nipype working directories.
For this reason, the general strategy was to submit a single job for each scan. Scans to be run are
listed in the space-separated table `params` (generated by `write_params0` followed by the
first half of `write_params.R`). The rows in `params` are then used to construct jobs, as defined in
`mriqc.qsub`. Rows are selected through the SGE task id mechanism (flag `-t`).

When new scans arrive, a mechanism is needed for determining what remains to be run. This is
done by comparing the list of json files generated (e.g., `find_jsons`) against the full list of params.
An example for doing this is given in the second half of the `write_params.R` script.
